<aura:component implements="flexipage:availableForAllPageTypes"
                controller="ReassignRecordPageController">

    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:attribute name="orgUsers" type="Object" />
    <aura:attribute name="userLookupTable" type="Object" />
    <aura:attribute name="selectedUser" type="String" />
    <aura:attribute name="searchKeyword" type="String" />
    <aura:attribute name="isSearchModalOpen" type="Boolean" default="false" />
    <aura:attribute name="userLookupTableColumns" type="List" default="[]" />
    <aura:attribute name="componentTitle" type="String" default="Select user" />

    <!-- COMPONENT INTERFACE IN IDLE STATE -->
    <fieldset class="slds-box slds-theme_default">
        <legend class="slds-text-heading_small">
            {!v.componentTitle}
        </legend>
        <ul class="slds-list_horizontal">
            <li class="slds-align-bottom slds-p-right_small">
                <lightning:button variant="brand"
                                label="Select"
                                title="Select"
                                name="selectCurrentOwner"
                                onclick="{!c.openSearchDialog}"
                                />
            </li>
            <li class="slds-align-bottom" style="width: 100%;">
                <lightning:input name="selectedUser"
                                 value="{!v.selectedUser}"
                                 readonly="true"
                                 placeholder="Presee Select to select user..."
                                 />
            </li>
        </ul>
    </fieldset>
    <!-- / COMPONENT INTERFACE IN IDLE STATE -->

    <!-- SEARCH USER MODAL -->
    <div class="slds-m-around_xx-large">
        <aura:if isTrue="{!v.isSearchModalOpen}">
                
            <!-- Modal/Popup Box starts here-->
            <section role="dialog" 
                    tabindex="-1"
                    aria-labelledby="modal-heading-01"
                    aria-modal="true"
                    aria-describedby="modal-content-id-1"
                    class="slds-modal slds-fade-in-open">

                <div class="slds-modal__container">
                    <!-- Modal/Popup Box Header Starts here-->
                    <header class="slds-modal__header">
                        <lightning:buttonIcon iconName="utility:close"
                                              onclick="{!c.closeSearchDialog}"
                                              alternativeText="close"
                                              variant="bare-inverse"
                                              class="slds-modal__close"/>
                        <h2 id="modal-heading-01"
                            class="slds-text-heading_medium slds-hyphenate">
                            User search
                        </h2>
                    </header>
                    <!--Modal/Popup Box Body Starts here-->
                    <div class="slds-modal__content slds-p-around_medium slds-scrollable_none"
                         id="modal-content-id-1">
                    <!-- USER SEARCH DIALOG -->
                        <lightning:input name="serachField"
                                        aura:id="searchField"
                                        placeholder="Start typing user name..."
                                        type="search"
                                        value="{!v.searchKeyword}"
                                        class="slds-var-p-bottom_large"
                                        onchange="{!c.updateUserLookupTable}"/>
                        <lightning:datatable data="{!v.userLookupTable}"
                                            columns="{!v.userLookupTableColumns}"
                                            keyField="Id"
                                            hideCheckboxColumn="true"
                                            resizeColumnDisabled="true"/>
                    <!-- / USER SEARCH DIALOG -->
                    </div>
                    <!--Modal/Popup Box Footer Starts here--> 
                    <footer class="slds-modal__footer">
                        <lightning:button variant="neutral"
                                        label="Cancel"
                                        title="Cancel"
                                        onclick="{!c.closeSearchDialog}"/>
                        <lightning:button variant="brand"
                                        label="OK"
                                        title="OK"
                                        onclick="{!c.submitSearchResult}"/>
                    </footer>
                </div>
            </section>
            <div class="slds-backdrop slds-backdrop_open"></div>
        </aura:if>
    </div>
    <!-- / SEARCH USER MODAL -->
</aura:component>

